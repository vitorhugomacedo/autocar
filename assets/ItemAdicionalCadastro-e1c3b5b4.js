import{I as y}from"./ItemAdicionalService-5c57b820.js";import{T as C}from"./TipoVeiculoService-4381615b.js";import{_ as x,l as I,m as w,n as A,b as a,c as b,d as v,f as t,e as o,t as r,g as d,F as k,k as B,q as V}from"./index-777c8e91.js";import{c as E,a as D,b as N}from"./index.esm-960d875f.js";import"./UrlService-8cfe23a9.js";const F={name:"ItemAdicionalCadastro",components:{},setup(){const n=I(),i=w(),l=new y,e=new C,{errors:s,handleSubmit:m,defineField:c}=A({validationSchema:E({nome:D().required("Campo obrigatório"),idTipoVeiculo:N().required("Campo obrigatório")})}),[u]=c("nome"),[p]=c("idTipoVeiculo");return{router:n,toast:i,itemAdicionalService:l,tipoVeiculoService:e,nome:u,idTipoVeiculo:p,handleSubmit:m,errors:s}},data(){return{breadcrumbHome:{icon:"pi pi-home",to:"/"},breadcrumbItems:[],tipoVeiculos:[],titulo:"",isEdicao:!1,id:0,onSubmit:null,loading:!1}},async mounted(){if(this.isEdicao=this.router.currentRoute.value.fullPath.includes("editar"),this.titulo=this.isEdicao?"Editar item adicional":"Novo item adicional",this.breadcrumbItems=[{label:"Cadastros",to:"/cadastros/itens-adicionais"},{label:"Itens Adicionais",to:"/cadastros/itens-adicionais"},{label:this.titulo,to:"#"}],this.tipoVeiculos=await this.tipoVeiculoService.getOptions(),this.isEdicao){const n=this.router.currentRoute.value.params.id,i=await this.itemAdicionalService.get(n);this.id=i.id,this.nome=i.nome,this.idTipoVeiculo=i.tipoVeiculo.id}this.onSubmit=this.handleSubmit(async n=>{const i={id:this.id,nome:n.nome,idTipoVeiculo:n.idTipoVeiculo};try{this.loading=!0,this.id?await this.itemAdicionalService.update(i):await this.itemAdicionalService.create(i),this.toast.add({severity:"success",summary:"Cadastro salvo com sucesso",detail:"",life:3e3}),setTimeout(()=>{this.router.push("/cadastros/itens-adicionais")},400)}catch(l){this.toast.add({severity:"error",summary:l.message,detail:"",life:3e3}),this.loading=!1}})},methods:{submit:async function(){this.onSubmit()}}},P={class:"font-medium text-2xl text-color"},q={class:"grid p-fluid"},R={class:"col-12 md:col-12"},H={class:"card"},O={key:0},U={class:"p-input-title"},z={class:"grid formgrid"},G={class:"col-12 mb-2 lg:col-6"},L=o("h6",{class:"p-input-title"},"Nome",-1),j={class:"p-error",id:"text-error"},J={class:"grid formgrid"},K={class:"col-12 mb-2 lg:col-6"},M=o("h6",{class:"p-input-title"},"Tipo de Veículo",-1),Q={class:"p-error",id:"text-error"},W={class:"my-2"};function X(n,i,l,e,s,m){const c=a("Toast"),u=a("Breadcrumb"),p=a("InputText"),f=a("Dropdown"),g=a("Panel"),_=a("Button"),T=a("router-link"),S=a("Toolbar");return b(),v(k,null,[t(c),o("div",P,r(s.titulo),1),t(u,{home:s.breadcrumbHome,model:s.breadcrumbItems},null,8,["home","model"]),o("div",q,[o("div",R,[o("div",H,[o("form",null,[t(g,{header:"Dados Principais",toggleable:"",class:"mb-4"},{default:d(()=>[s.id?(b(),v("div",O,[o("h6",U,"CÓDIGO: "+r(this.id),1)])):B("",!0),o("div",z,[o("div",G,[L,t(p,{modelValue:e.nome,"onUpdate:modelValue":i[0]||(i[0]=h=>e.nome=h),class:V({"p-invalid":e.errors.nome}),type:"text"},null,8,["modelValue","class"]),o("small",j,r(e.errors.nome||""),1)])]),o("div",J,[o("div",K,[M,t(f,{modelValue:e.idTipoVeiculo,"onUpdate:modelValue":i[1]||(i[1]=h=>e.idTipoVeiculo=h),editable:"",options:s.tipoVeiculos,optionLabel:"opcao",optionValue:"id",placeholder:"Selecione o tipo de veículo",class:V(["w-full",{"p-invalid":e.errors.idTipoVeiculo}])},null,8,["modelValue","options","class"]),o("small",Q,r(e.errors.idTipoVeiculo||""),1)])])]),_:1})])]),t(S,null,{start:d(()=>[t(T,{to:"/cadastros/itens-adicionais"},{default:d(()=>[t(_,{label:"Voltar",icon:"pi pi-undo",class:"p-button-secondary mr-2",raised:""})]),_:1})]),end:d(()=>[o("div",W,[t(_,{label:"Salvar",icon:"pi pi-save",class:"p-button-sucess mr-4",loading:s.loading,raised:"",onClick:m.submit},null,8,["loading","onClick"])])]),_:1})])])],64)}const eo=x(F,[["render",X]]);export{eo as default};
