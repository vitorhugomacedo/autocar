import{P as S}from"./PerfilUsuarioService-75d640dc.js";import{U as F}from"./UrlService-8cfe23a9.js";import{_ as P,y as T,m as D,b as a,p as U,c as k,d as B,f as e,e as r,g as t,j as R,F as j,q as N,t as d,i as g,s as _}from"./index-b821698f.js";import{F as z}from"./Filtros-6d2f144b.js";const E={name:"UsuarioPerfilLista",components:{Filtros:z},setup(){const s=T(),c=D(),n=new F;return{confirm:s,toast:c,urlService:n}},data(){return{breadcrumbHome:{icon:"pi pi-home",to:"/"},breadcrumbItems:[{label:"Configurações",to:"/configuracoes/perfil-usuario"},{label:"Perfil de Usuário",to:"/configuracoes/perfil-usuario"}],filters:[],registros:[],loading:!0}},async beforeMount(){this.searchRecords(),this.buildFilters()},methods:{showTemplate:function(s,c){this.confirm.require({group:"templating",header:"Confirmação",message:c,icon:"pi pi-exclamation-circle",acceptIcon:"pi pi-check",rejectIcon:"pi pi-times",rejectClass:"p-button-outlined p-button-sm",acceptClass:"p-button-sm",rejectLabel:"Cancelar",acceptLabel:"Excluir",accept:async()=>{await this.perfilUsuarioService.delete({id:s});const n=this.registros.data.findIndex(m=>m.id==s);n>-1&&this.registros.data.splice(n,1),this.toast.add({severity:"success",summary:"Registro excluído com sucesso",detail:"",life:3e3})}})},searchRecords:async function(){this.loading=!0,this.perfilUsuarioService=new S,this.registros=await this.perfilUsuarioService.getAll(this.urlService.getQueryParamsObject()),this.loading=!1},buildFilters:async function(){this.filters=[{field:"Descrição",property:"descricao",type:"text"}]},updateFilter:function(s){this.urlService.clearQueryParams();for(var c in s)s.hasOwnProperty(c)&&this.urlService.setParam(c,s[c]);this.searchRecords()},changePage:async function(s){this.urlService.setParam("page",s.page+1),this.searchRecords()}}},I=r("div",{class:"font-medium text-2xl text-color"},"Perfil de Usuário",-1),L={class:"grid p-fluid"},H={class:"col-12 md:col-12"},V={class:"card"},q={class:"my-2"},O={class:"flex flex-column align-items-center w-full gap-3 surface-border"},Q=r("i",{class:"pi pi-spin pi-spinner",style:{"font-size":"2rem"}},null,-1),A={style:{"vertical-align":"middle"},class:"image-text"};function K(s,c,n,m,o,p){const b=a("Breadcrumb"),l=a("Button"),f=a("router-link"),y=a("Toolbar"),v=a("ConfirmDialog"),x=a("Filtros"),u=a("Column"),C=a("DataTable"),w=a("Toast"),h=U("tooltip");return k(),B(j,null,[I,e(b,{home:o.breadcrumbHome,model:o.breadcrumbItems},null,8,["home","model"]),r("div",L,[r("div",H,[r("div",V,[e(y,{class:"mb-4"},{end:t(()=>[r("div",q,[e(f,{to:"/configuracoes/perfil-usuario/novo"},{default:t(()=>[e(l,{label:"Novo",icon:"pi pi-plus",class:"p-button-primary mr-2"})]),_:1})])]),_:1}),e(v,{group:"templating"},{message:t(i=>[r("div",O,[r("i",{class:N([i.message.icon,"text-6xl text-primary-500"])},null,2),r("p",null,d(i.message.message),1)])]),_:1}),e(C,{value:o.registros.data,paginator:"",lazy:"",first:(o.registros.currentPage-1)*o.registros.pageSize,rows:o.registros.pageSize,totalRecords:o.registros.count,class:"p-datatable backgroud-color-white",dataKey:"id",rowHover:!0,filterDisplay:"menu",loading:o.loading,responsiveLayout:"scroll"},R({header:t(()=>[e(x,{filters:o.filters,updateFilter:p.updateFilter},null,8,["filters","updateFilter"])]),loading:t(()=>[Q]),footer:t(()=>[]),default:t(()=>[e(u,{field:"id",header:"Cód.",bodyClass:"text-left",style:{"min-width":"5rem"}},{body:t(({data:i})=>[r("span",A,d(i.id),1)]),_:1}),e(u,{field:"descricao",header:"Nome",style:{"min-width":"8rem"}},{body:t(({data:i})=>[g(d(i.descricao),1)]),_:1}),e(u,{field:"Edit",header:"",dataType:"boolean",bodyClass:"text-right",style:{"min-width":"10rem"}},{body:t(({data:i})=>[e(f,{to:`/configuracoes/perfil-usuario/editar/${i.id}`},{default:t(()=>[_(e(l,{icon:"pi pi-user-edit",class:"p-button-rounded p-button-text mr-4",text:"",rounded:""},null,512),[[h,"Editar",void 0,{top:!0}]])]),_:2},1032,["to"]),_(e(l,{icon:"pi pi-trash",class:"p-button-rounded p-button-text",text:"",rounded:"",onClick:M=>p.showTemplate(i.id,`Deseja realmente excluir o perfil ${i.descricao}?`)},null,8,["onClick"]),[[h,"Excluir",void 0,{top:!0}]])]),_:1})]),_:2},[o.loading?void 0:{name:"empty",fn:t(()=>[g("Nenhum perfil de usuário encontrado. ")]),key:"0"}]),1032,["value","first","rows","totalRecords","loading"])])]),e(w)])],64)}const Y=P(E,[["render",K]]);export{Y as default};
