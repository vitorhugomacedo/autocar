import{T as y}from"./TipoCarteiraService-91a2fed5.js";import{_ as S,l as T,m as x,n as k,b as i,c as p,d as h,f as e,e as t,t as m,g as n,F as B,k as V,q as E}from"./index-def3a469.js";import{c as I,a as w}from"./index.esm-960d875f.js";import"./UrlService-8cfe23a9.js";const D={name:"TipoCarteiraCadastro",components:{},setup(){const a=T(),o=x(),c=new y,{errors:r,handleSubmit:s,defineField:d}=k({validationSchema:I({descricao:w().required("Campo obrigatório")})}),[l]=d("descricao");return{router:a,toast:o,tipoCarteiraService:c,descricao:l,handleSubmit:s,errors:r}},data(){return{breadcrumbHome:{icon:"pi pi-home",to:"/"},breadcrumbItems:[],titulo:"",isEdicao:!1,id:0,onSubmit:null,loading:!1}},async mounted(){if(this.isEdicao=this.router.currentRoute.value.fullPath.includes("editar"),this.titulo=this.isEdicao?"Editar tipo de carteira":"Novo tipo de carteira",this.breadcrumbItems=[{label:"Cadastros",to:"/financeiro/cadastros/tipo-carteira"},{label:"Tipos de Carteiras",to:"/financeiro/cadastros/tipo-carteira"},{label:this.titulo,to:"#"}],this.isEdicao){const a=this.router.currentRoute.value.params.id,o=await this.tipoCarteiraService.get(a);this.id=o.id,this.descricao=o.descricao}this.onSubmit=this.handleSubmit(async a=>{const o={id:this.id,descricao:a.descricao};try{this.loading=!0,this.id?await this.tipoCarteiraService.update(o):await this.tipoCarteiraService.create(o),this.toast.add({severity:"success",summary:"Cadastro salvo com sucesso",detail:"",life:3e3}),setTimeout(()=>{this.router.push("/financeiro/cadastros/tipo-carteira")},400)}catch(c){this.toast.add({severity:"error",summary:c.message,detail:"",life:3e3}),this.loading=!1}})},methods:{submit:async function(){this.onSubmit()}}},F={class:"font-medium text-2xl text-color"},N={class:"grid p-fluid"},P={class:"col-12 md:col-12"},R={class:"card"},q={key:0},H={class:"p-input-title"},z={class:"grid formgrid"},G={class:"col-12 mb-2 lg:col-3 lg:mb-2"},O=t("h6",{class:"p-input-title"},"Descrição",-1),U={class:"p-error",id:"text-error"},j={class:"my-2"};function A(a,o,c,r,s,d){const l=i("Toast"),_=i("Breadcrumb"),b=i("InputText"),f=i("Panel"),u=i("Button"),v=i("router-link"),C=i("Toolbar");return p(),h(B,null,[e(l),t("div",F,m(s.titulo),1),e(_,{home:s.breadcrumbHome,model:s.breadcrumbItems},null,8,["home","model"]),t("div",N,[t("div",P,[t("div",R,[t("form",null,[e(f,{header:"Dados Principais",toggleable:"",class:"mb-4"},{default:n(()=>[s.id?(p(),h("div",q,[t("h6",H,"CÓDIGO: "+m(this.id),1)])):V("",!0),t("div",z,[t("div",G,[O,e(b,{modelValue:r.descricao,"onUpdate:modelValue":o[0]||(o[0]=g=>r.descricao=g),class:E({"p-invalid":r.errors.descricao}),type:"text"},null,8,["modelValue","class"]),t("small",U,m(r.errors.descricao||""),1)])])]),_:1})])]),e(C,null,{start:n(()=>[e(v,{to:"/financeiro/cadastros/tipo-carteira"},{default:n(()=>[e(u,{label:"Voltar",icon:"pi pi-undo",class:"p-button-info mr-2",raised:""})]),_:1})]),end:n(()=>[t("div",j,[e(u,{label:"Salvar",icon:"pi pi-save",class:"p-button-sucess mr-4",loading:s.loading,raised:"",onClick:d.submit},null,8,["loading","onClick"])])]),_:1})])])],64)}const Q=S(D,[["render",A]]);export{Q as default};
