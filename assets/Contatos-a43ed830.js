var T=Object.defineProperty;var U=(e,t,s)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var E=(e,t,s)=>(U(e,typeof t!="symbol"?t+"":t,s),s);import{A as q,_ as K,n as k,b as m,c as v,B as w,g as c,e as a,d as g,k as y,i as h,f as l,q as p,t as i,j as P}from"./index-777c8e91.js";import{c as x,a as b}from"./index.esm-960d875f.js";class F{constructor(){E(this,"buscaCEP",async t=>await q.$axios.get(`https://viacep.com.br/ws/${t}/json`).then(s=>s.data).catch(s=>{console.log(s.response.data.Message)}))}}const G={props:["enderecos","updateEnderecos","multiplo"],name:"Enderecos",setup(){const{errors:e,handleSubmit:t,defineField:s}=k({validationSchema:x({cep:b().required("Campo obrigatório"),logradouro:b().required("Campo obrigatório"),numero:b().required("Campo obrigatório"),bairro:b().required("Campo obrigatório"),complemento:b(),cidade:b().required("Campo obrigatório"),uf:b().required("Campo obrigatório")})}),[o]=s("cep"),[_]=s("logradouro"),[d]=s("numero"),[f]=s("bairro"),[u]=s("complemento"),[C]=s("cidade"),[r]=s("uf");return{cep:o,logradouro:_,numero:d,bairro:f,complemento:u,cidade:C,uf:r,handleSubmit:t,errors:e}},data(){return{id:0,codigoIBGE:"",listaEnderecos:[],onSubmit:null,valid:!1}},mounted(){if(this.multiplo)this.listaEnderecos=this.enderecos;else{this.onSubmit=this.handleSubmit(async t=>{this.valid=!0});const e=this.enderecos[0];e&&(this.id=e.id,this.cep=e.cep,this.logradouro=e.logradouro,this.numero=e.numero,this.bairro=e.bairro,this.complemento=e.complemento,this.cidade=e.cidade,this.uf=e.uf,this.codigoIBGE=e.codigoIBGE)}},methods:{handleBuscaCEP:async function(){const e=this.cep.replace(/[^0-9]/g,"");if(e.length<8)return;const s=await new F().buscaCEP(e.replace("-",""));this.logradouro=s.logradouro,this.numero=s.numero,this.bairro=s.bairro,this.complemento=s.complemento,this.cidade=s.localidade,this.uf=s.uf,this.codigoIBGE=s.ibge,this.handleKeyup()},handleKeyup:function(){this.multiplo||this.updateEnderecos([{cep:this.cep,logradouro:this.logradouro,numero:this.numero,bairro:this.bairro,complemento:this.complemento,cidade:this.cidade,uf:this.uf,codigoIBGE:this.codigoIBGE}])},addAddress:function(){this.updateEnderecos(this.listaEnderecos)},validate:async function(){return this.valid=!1,await this.onSubmit(),this.valid}},watch:{enderecos:function(){if(this.multiplo)this.listaEnderecos=this.enderecos;else{const e=this.enderecos[0];e&&(this.id=e.id,this.cep=e.cep,this.logradouro=e.logradouro,this.numero=e.numero,this.bairro=e.bairro,this.complemento=e.complemento,this.cidade=e.cidade,this.uf=e.uf,this.codigoIBGE=e.codigoIBGE)}}}},N={class:"grid formgrid"},D={class:"col-6 mb-2 lg:col-3"},M={class:"p-input-title"},A={key:0,class:"p-primary"},L={class:"p-error",id:"text-error"},j={class:"grid formgrid"},R={class:"col-12 mb-2 lg:col-10"},z={class:"p-input-title"},H={key:0,class:"p-error"},W={class:"p-error",id:"text-error"},J={class:"col-12 mb-2 lg:col-2"},O={class:"p-input-title"},Q={key:0,class:"p-error"},X={class:"p-error",id:"text-error"},Y={class:"col-12 mb-2 lg:col-3"},Z={class:"p-input-title"},$={key:0,class:"p-error"},oo={class:"p-error",id:"text-error"},eo={class:"col-12 mb-2 lg:col-3"},to=a("h6",{class:"p-input-title"},"Complemento",-1),so={class:"p-error",id:"text-error"},ao={class:"col-12 mb-2 lg:col-4"},lo={class:"p-input-title"},ro={key:0,class:"p-error"},no={class:"p-error",id:"text-error"},io={class:"col-12 mb-2 lg:col-2"},co={class:"p-input-title"},mo={key:0,class:"p-error"},uo={class:"p-error",id:"text-error"};function po(e,t,s,o,_,d){const f=m("InputMasked"),u=m("InputText"),C=m("Panel");return v(),w(C,{header:"Endereços",toggleable:"",class:"mb-4"},{default:c(()=>[a("div",N,[a("div",D,[a("h6",M,[s.multiplo?y("",!0):(v(),g("span",A,"*")),h("CEP")]),l(f,{modelValue:o.cep,"onUpdate:modelValue":t[0]||(t[0]=r=>o.cep=r),mask:"99999-999",class:p({"p-invalid":o.errors.cep}),onKeyup:d.handleBuscaCEP},null,8,["modelValue","class","onKeyup"]),a("small",L,i(o.errors.cep||""),1)])]),a("div",j,[a("div",R,[a("h6",z,[s.multiplo?y("",!0):(v(),g("span",H,"*")),h("Logradouro")]),l(u,{type:"text",modelValue:o.logradouro,"onUpdate:modelValue":t[1]||(t[1]=r=>o.logradouro=r),class:p({"p-invalid":o.errors.logradouro}),onKeyup:d.handleKeyup},null,8,["modelValue","class","onKeyup"]),a("small",W,i(o.errors.logradouro||""),1)]),a("div",J,[a("h6",O,[s.multiplo?y("",!0):(v(),g("span",Q,"*")),h("Número")]),l(u,{type:"text",modelValue:o.numero,"onUpdate:modelValue":t[2]||(t[2]=r=>o.numero=r),class:p({"p-invalid":o.errors.numero}),onKeyup:d.handleKeyup},null,8,["modelValue","class","onKeyup"]),a("small",X,i(o.errors.numero||""),1)]),a("div",Y,[a("h6",Z,[s.multiplo?y("",!0):(v(),g("span",$)),h("Bairro")]),l(u,{type:"text",modelValue:o.bairro,"onUpdate:modelValue":t[3]||(t[3]=r=>o.bairro=r),class:p({"p-invalid":o.errors.bairro}),onKeyup:d.handleKeyup},null,8,["modelValue","class","onKeyup"]),a("small",oo,i(o.errors.bairro||""),1)]),a("div",eo,[to,l(u,{type:"text",modelValue:o.complemento,"onUpdate:modelValue":t[4]||(t[4]=r=>o.complemento=r),class:p({"p-invalid":o.errors.complemento}),onKeyup:d.handleKeyup},null,8,["modelValue","class","onKeyup"]),a("small",so,i(o.errors.complemento||""),1)]),a("div",ao,[a("h6",lo,[s.multiplo?y("",!0):(v(),g("span",ro,"*")),h("Cidade")]),l(u,{type:"text",modelValue:o.cidade,"onUpdate:modelValue":t[5]||(t[5]=r=>o.cidade=r),disabled:"",class:p({"p-invalid":o.errors.cidade}),onKeyup:d.handleKeyup},null,8,["modelValue","class","onKeyup"]),a("small",no,i(o.errors.cidade||""),1)]),a("div",io,[a("h6",co,[s.multiplo?y("",!0):(v(),g("span",mo,"*")),h("UF")]),l(u,{type:"text",modelValue:o.uf,"onUpdate:modelValue":t[6]||(t[6]=r=>o.uf=r),disabled:"",class:p({"p-invalid":o.errors.uf}),onKeyup:d.handleKeyup},null,8,["modelValue","class","onKeyup"]),a("small",uo,i(o.errors.uf||""),1)])])]),_:1})}const To=K(G,[["render",po]]),ho={props:["contatos","updateContatos"],name:"Contatos",setup(){const{errors:e,handleSubmit:t,defineField:s}=k({validationSchema:x({tipoContato:x().required("Campo obrigatório"),valor:b().required("Campo obrigatório"),responsavel:b().required("Campo obrigatório")})}),[o]=s("tipoContato"),[_]=s("valor"),[d]=s("responsavel");return{tipoContato:o,valor:_,responsavel:d,handleSubmit:t,errors:e}},data(){return{tiposContatos:[{name:"Celular",code:0},{name:"Telefone",code:1},{name:"E-mail",code:2},{name:"WhatsApp",code:3}],tipoContato:{name:"Celular",code:0},listaContatos:[],onSubmit:null}},mounted(){this.onSubmit=this.handleSubmit(async e=>{this.listaContatos.push({id:0,tipoContato:e.tipoContato.code,valor:e.valor,responsavel:e.responsavel}),this.tipoContato=null,this.valor=null,this.responsavel=null}),this.listaContatos=this.contatos},methods:{adicionarContato:function(){this.onSubmit(),this.updateContatos(this.listaContatos)},validate:async function(){return this.valid=!0,await this.onSubmit(),this.valid}}},_o={class:"grid formgrid"},bo={class:"col-12 mb-2 lg:col-3"},vo=a("h6",{class:"p-input-title"},"Tipo de contato",-1),go={class:"p-error",id:"text-error"},yo={class:"col-12 mb-2 lg:col-3"},fo=a("h6",{class:"p-input-title"},"Contato",-1),Co={class:"p-error",id:"text-error"},Vo={class:"col-12 mb-2 lg:col-5"},xo=a("h6",{class:"p-input-title"},"Responsável",-1),Eo={class:"p-error",id:"text-error"},Ko={class:"col-12 mb-2 lg:col-1",style:{display:"flex","align-items":"end"}},ko={style:{"vertical-align":"middle"}};function wo(e,t,s,o,_,d){const f=m("Dropdown"),u=m("InputMasked"),C=m("InputText"),r=m("Button"),V=m("Column"),B=m("router-link"),S=m("DataTable"),I=m("Panel");return v(),w(I,{header:"Contatos",toggleable:"",class:"mb-4"},{default:c(()=>[a("div",_o,[a("div",bo,[vo,l(f,{modelValue:_.tipoContato,"onUpdate:modelValue":t[0]||(t[0]=n=>_.tipoContato=n),options:_.tiposContatos,optionLabel:"name",class:p({"p-invalid":o.errors.tipoContato})},null,8,["modelValue","options","class"]),a("small",go,i(o.errors.tipoContato||""),1)]),a("div",yo,[fo,l(u,{modelValue:o.valor,"onUpdate:modelValue":t[1]||(t[1]=n=>o.valor=n),mask:"(99) 99999-9999",class:p({"p-invalid":o.errors.valor})},null,8,["modelValue","class"]),a("small",Co,i(o.errors.valor||""),1)]),a("div",Vo,[xo,l(C,{type:"text",modelValue:o.responsavel,"onUpdate:modelValue":t[2]||(t[2]=n=>o.responsavel=n),class:p({"p-invalid":o.errors.responsavel})},null,8,["modelValue","class"]),a("small",Eo,i(o.errors.responsavel||""),1)]),a("div",Ko,[l(r,{icon:"pi pi-plus",onClick:d.adicionarContato},null,8,["onClick"])])]),l(S,{value:_.listaContatos,class:"p-datatable backgroud-color-white mt-4",rows:5,dataKey:"id",rowHover:!0,filterDisplay:"menu",responsiveLayout:"scroll",globalFilterFields:["name","typeclient.name","representative.name","balance","status"]},P({footer:c(()=>[]),default:c(()=>[l(V,{field:"id",header:"Cód.",bodyClass:"text-left",style:{"min-width":"6rem"}},{body:c(({data:n})=>[a("span",ko,i(n.id),1)]),_:1}),l(V,{field:"tipoContato",header:"Tipo de Contato",style:{"min-width":"6rem"}},{body:c(({data:n})=>[h(i(n.tipoContato),1)]),_:1}),l(V,{field:"valor",header:"Número / E-mail",style:{"min-width":"6rem"}},{body:c(({data:n})=>[h(i(n.valor),1)]),_:1}),l(V,{field:"responsavel",header:"Responsável",bodyClass:"text-left",style:{"min-width":"12rem"}},{body:c(({data:n})=>[h(i(n.responsavel),1)]),_:1}),l(V,{field:"Edit",header:"",dataType:"boolean",bodyClass:"text-center",style:{"min-width":"4rem"}},{body:c(({data:n})=>[a("div",null,[l(B,{to:`/superadmin/cadastros/empresas/editar/${n.id}`},{default:c(()=>[l(r,{icon:"pi pi-user-edit",class:"p-button-rounded p-button-text",text:"",rounded:""})]),_:2},1032,["to"])])]),_:1})]),_:2},[e.loading?void 0:{name:"empty",fn:c(()=>[h("Nenhuma contato cadastrado. ")]),key:"0"}]),1032,["value","globalFilterFields"])]),_:1})}const Uo=K(ho,[["render",wo]]);export{Uo as C,To as E};
