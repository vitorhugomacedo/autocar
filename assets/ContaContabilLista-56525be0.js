import{C as T}from"./ContaContabilService-d305c6b7.js";import{G as F}from"./GrupoContabilService-a4ba4ad7.js";import{U as k}from"./UrlService-8cfe23a9.js";import{_ as E,y as R,m as B,b as r,p as P,c as g,d as C,f as e,e as a,g as o,j,F as I,q as N,t as d,i as p,s as y,k as z}from"./index-777c8e91.js";import{F as G}from"./Filtros-a811aaf2.js";const L={name:"ContaContabilLista",components:{Filtros:G},setup(){const i=R(),n=B(),c=new k,u=new F;return{confirm:i,toast:n,urlService:c,grupoContabilService:u}},data(){return{breadcrumbHome:{icon:"pi pi-home",to:"/"},breadcrumbItems:[{label:"Cadastros",to:"/financeiro/cadastros/conta-contabil"},{label:"Conta Contabeis",to:"/financeiro/cadastros/conta-contabil"}],filters:[],contaContabilService:null,registros:[],loading:!0}},async beforeMount(){this.searchRecords(),this.buildFilters()},methods:{showTemplate:function(i,n){this.confirm.require({group:"templating",header:"Confirmação",message:n,icon:"pi pi-exclamation-circle",acceptIcon:"pi pi-check",rejectIcon:"pi pi-times",rejectClass:"p-button-outlined p-button-sm",acceptClass:"p-button-sm",rejectLabel:"Cancelar",acceptLabel:"Excluir",accept:async()=>{await this.contaContabilService.delete({id:i});const c=this.registros.data.findIndex(u=>u.id==i);c>-1&&this.registros.data.splice(c,1),this.toast.add({severity:"success",summary:"Registro excluído com sucesso",detail:"",life:3e3})}})},searchRecords:async function(){this.loading=!0,this.contaContabilService=new T,this.registros=await this.contaContabilService.getAll(this.urlService.getQueryParamsObject()),this.loading=!1},buildFilters:async function(){const i=await this.grupoContabilService.getOptions();this.filters=[{field:"Descricão",property:"descricao",type:"text"},{field:"Grupo Contábil",property:"idGrupoContabil",type:"multiselect",options:i}]},updateFilter:function(i){this.urlService.clearQueryParams();for(var n in i)i.hasOwnProperty(n)&&this.urlService.setParam(n,i[n]);this.searchRecords()},changePage:async function(i){this.urlService.setParam("page",i.page+1),this.searchRecords()}}},V=a("div",{class:"font-medium text-2xl text-color"},"Contas Contabeis",-1),A={class:"grid p-fluid"},H={class:"col-12 md:col-12"},O={class:"card"},q={class:"my-2"},Q={class:"flex flex-column align-items-center w-full gap-3 surface-border"},U=a("i",{class:"pi pi-spin pi-spinner",style:{"font-size":"2rem"}},null,-1),K={style:{"vertical-align":"middle"},class:"image-text"},M={key:0};function J(i,n,c,u,s,b){const v=r("Breadcrumb"),m=r("Button"),f=r("router-link"),x=r("Toolbar"),h=r("Filtros"),w=r("ConfirmDialog"),l=r("Column"),S=r("DataTable"),D=r("Toast"),_=P("tooltip");return g(),C(I,null,[V,e(v,{home:s.breadcrumbHome,model:s.breadcrumbItems},null,8,["home","model"]),a("div",A,[a("div",H,[a("div",O,[e(x,{class:"mb-4"},{end:o(()=>[a("div",q,[e(f,{to:"/financeiro/cadastros/conta-contabil/novo"},{default:o(()=>[e(m,{label:"Novo",icon:"pi pi-plus",class:"p-button-primary mr-2"})]),_:1})])]),_:1}),e(h,null,{container:o(()=>[]),_:1}),e(w,{group:"templating"},{message:o(t=>[a("div",Q,[a("i",{class:N([t.message.icon,"text-6xl text-primary-500"])},null,2),a("p",null,d(t.message.message),1)])]),_:1}),e(S,{value:s.registros.data,paginator:"",lazy:"",first:(s.registros.currentPage-1)*s.registros.pageSize,rows:s.registros.pageSize,totalRecords:s.registros.count,class:"p-datatable backgroud-color-white",dataKey:"id",rowHover:!0,filterDisplay:"menu",loading:s.loading,responsiveLayout:"scroll"},j({header:o(()=>[e(h,{filters:s.filters,updateFilter:b.updateFilter},null,8,["filters","updateFilter"])]),loading:o(()=>[U]),footer:o(()=>[]),default:o(()=>[e(l,{field:"id",header:"Cód.",bodyClass:"text-left",style:{"min-width":"2rem"}},{body:o(({data:t})=>[a("span",K,d(t.id),1)]),_:1}),e(l,{field:"descricao",header:"Descrição",style:{"min-width":"12rem"}},{body:o(({data:t})=>[p(d(t.descricao),1)]),_:1}),e(l,{field:"grupo",header:"Grupo contábil",style:{"min-width":"12rem"}},{body:o(({data:t})=>[p(d(t.grupoContabil.descricao),1)]),_:1}),e(l,{field:"tipo",header:"Tipo de Classificação",style:{"min-width":"12rem"}},{body:o(({data:t})=>[p(d(t.grupoContabil.tipo=="R"?"RECEITA":t.tipo=="D"?"DESPESA":""),1)]),_:1}),e(l,{field:"Edit",header:"",dataType:"boolean",bodyClass:"text-right",style:{"min-width":"4rem"}},{body:o(({data:t})=>[t.editavel?(g(),C("div",M,[e(f,{to:`/financeiro/cadastros/conta-contabil/editar/${t.id}`},{default:o(()=>[y(e(m,{icon:"pi pi-user-edit",class:"p-button-rounded p-button-text",text:"",rounded:""},null,512),[[_,"Editar",void 0,{top:!0}]])]),_:2},1032,["to"]),y(e(m,{icon:"pi pi-trash",class:"p-button-rounded p-button-text",text:"",rounded:"",onClick:W=>b.showTemplate(t.id,`Deseja realmente excluir a conta contábil ${t.descricao}?`)},null,8,["onClick"]),[[_,"Excluir",void 0,{top:!0}]])])):z("",!0)]),_:1})]),_:2},[s.loading?void 0:{name:"empty",fn:o(()=>[p("Nenhuma conta contabil encontrado. ")]),key:"0"}]),1032,["value","first","rows","totalRecords","loading"])])]),e(D)])],64)}const te=E(L,[["render",J]]);export{te as default};
