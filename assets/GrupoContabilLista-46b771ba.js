import{G as T}from"./GrupoContabilService-722383d1.js";import{U as E}from"./UrlService-8cfe23a9.js";import{_ as F,y as k,m as R,b as a,p as P,c as h,d as _,f as e,e as r,g as o,j as B,F as I,q as j,t as d,i as p,s as y,k as G}from"./index-def3a469.js";import{F as N}from"./Filtros-9c86de79.js";const z={name:"GrupoContabilLista",components:{Filtros:N},setup(){const s=k(),n=R(),c=new E;return{confirm:s,toast:n,urlService:c}},data(){return{breadcrumbHome:{icon:"pi pi-home",to:"/"},breadcrumbItems:[{label:"Cadastros",to:"/financeiro/cadastros/grupo-contabil"},{label:"Grupo Contabeis",to:"/financeiro/cadastros/grupo-contabil"}],filters:[],grupoContabilService:null,registros:[],loading:!0}},async beforeMount(){this.searchRecords(),this.buildFilters()},methods:{showTemplate:function(s,n){this.confirm.require({group:"templating",header:"Confirmação",message:n,icon:"pi pi-exclamation-circle",acceptIcon:"pi pi-check",rejectIcon:"pi pi-times",rejectClass:"p-button-outlined p-button-sm",acceptClass:"p-button-sm",rejectLabel:"Cancelar",acceptLabel:"Excluir",accept:async()=>{await this.grupoContabilService.delete({id:s});const c=this.registros.data.findIndex(m=>m.id==s);c>-1&&this.registros.data.splice(c,1),this.toast.add({severity:"success",summary:"Registro excluído com sucesso",detail:"",life:3e3})}})},searchRecords:async function(){this.loading=!0,this.grupoContabilService=new T,this.registros=await this.grupoContabilService.getAll(this.urlService.getQueryParamsObject()),this.loading=!1},buildFilters:function(){this.filters=[{field:"Descricão",property:"descricao",type:"text"},{field:"Tipo",property:"tipo",type:"multiselect",options:[{id:"R",opcao:"RECEITA"},{id:"D",opcao:"DESPESA"}]}]},updateFilter:function(s){this.urlService.clearQueryParams();for(var n in s)s.hasOwnProperty(n)&&this.urlService.setParam(n,s[n]);this.searchRecords()},changePage:async function(s){this.urlService.setParam("page",s.page+1),this.searchRecords()}}},A=r("div",{class:"font-medium text-2xl text-color"},"Grupos Contabeis",-1),L={class:"grid p-fluid"},V={class:"col-12 md:col-12"},H={class:"card"},q={class:"my-2"},O={class:"flex flex-column align-items-center w-full gap-3 surface-border"},Q=r("i",{class:"pi pi-spin pi-spinner",style:{"font-size":"2rem"}},null,-1),U={style:{"vertical-align":"middle"},class:"image-text"},K={key:0};function M(s,n,c,m,i,f){const v=a("Breadcrumb"),u=a("Button"),g=a("router-link"),C=a("Toolbar"),x=a("ConfirmDialog"),S=a("Filtros"),l=a("Column"),w=a("DataTable"),D=a("Toast"),b=P("tooltip");return h(),_(I,null,[A,e(v,{home:i.breadcrumbHome,model:i.breadcrumbItems},null,8,["home","model"]),r("div",L,[r("div",V,[r("div",H,[e(C,{class:"mb-4"},{end:o(()=>[r("div",q,[e(g,{to:"/financeiro/cadastros/grupo-contabil/novo"},{default:o(()=>[e(u,{label:"Novo",icon:"pi pi-plus",class:"p-button-primary mr-2"})]),_:1})])]),_:1}),e(x,{group:"templating"},{message:o(t=>[r("div",O,[r("i",{class:j([t.message.icon,"text-6xl text-primary-500"])},null,2),r("p",null,d(t.message.message),1)])]),_:1}),e(w,{value:i.registros.data,paginator:"",lazy:"",first:(i.registros.currentPage-1)*i.registros.pageSize,rows:i.registros.pageSize,totalRecords:i.registros.count,class:"p-datatable backgroud-color-white",dataKey:"id",rowHover:!0,filterDisplay:"menu",loading:i.loading,responsiveLayout:"scroll"},B({header:o(()=>[e(S,{filters:i.filters,updateFilter:f.updateFilter},null,8,["filters","updateFilter"])]),loading:o(()=>[Q]),footer:o(()=>[]),default:o(()=>[e(l,{field:"id",header:"Cód.",bodyClass:"text-left",style:{"min-width":"2rem"}},{body:o(({data:t})=>[r("span",U,d(t.id),1)]),_:1}),e(l,{field:"descricao",header:"Descrição",style:{"min-width":"12rem"}},{body:o(({data:t})=>[p(d(t.descricao),1)]),_:1}),e(l,{field:"tipo",header:"Tipo de Classificação",style:{"min-width":"12rem"}},{body:o(({data:t})=>[p(d(t.tipo=="R"?"RECEITA":t.tipo=="D"?"DESPESA":""),1)]),_:1}),e(l,{field:"Edit",header:"",dataType:"boolean",bodyClass:"text-right",style:{"min-width":"4rem"}},{body:o(({data:t})=>[t.editavel?(h(),_("div",K,[e(g,{to:`/financeiro/cadastros/grupo-contabil/editar/${t.id}`},{default:o(()=>[y(e(u,{icon:"pi pi-user-edit",class:"p-button-rounded p-button-text",text:"",rounded:""},null,512),[[b,"Editar",void 0,{top:!0}]])]),_:2},1032,["to"]),y(e(u,{icon:"pi pi-trash",class:"p-button-rounded p-button-text",text:"",rounded:"",onClick:J=>f.showTemplate(t.id,`Deseja realmente excluir o grupo contábil ${t.descricao}?`)},null,8,["onClick"]),[[b,"Excluir",void 0,{top:!0}]])])):G("",!0)]),_:1})]),_:2},[i.loading?void 0:{name:"empty",fn:o(()=>[p("Nenhum grupo contabil encontrado. ")]),key:"0"}]),1032,["value","first","rows","totalRecords","loading"])])]),e(D)])],64)}const $=F(z,[["render",M]]);export{$ as default};
