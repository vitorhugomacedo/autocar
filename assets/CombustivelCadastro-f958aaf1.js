import{V as y}from"./VeiculoCombustivelService-405b8d10.js";import{_ as S,l as x,m as V,n as k,b as i,c as b,d as h,f as o,e as s,t as m,g as l,F as T,k as B,q as E}from"./index-b821698f.js";import{c as I,a as w}from"./index.esm-960d875f.js";import"./UrlService-8cfe23a9.js";const N={name:"CombustivelCadastro",components:{},setup(){const a=x(),t=V(),r=new y,{errors:c,handleSubmit:e,defineField:n}=k({validationSchema:I({descricao:w().required("Campo obrigatório")})}),[d]=n("descricao");return{router:a,toast:t,combustivelService:r,descricao:d,handleSubmit:e,errors:c}},data(){return{breadcrumbHome:{icon:"pi pi-home",to:"/"},breadcrumbItems:[],titulo:"",isEdicao:!1,id:0,onSubmit:null,loading:!1}},async mounted(){if(this.isEdicao=this.router.currentRoute.value.fullPath.includes("editar"),this.titulo=this.isEdicao?"Editar combustivel":"Novo combustivel",this.breadcrumbItems=[{label:"Cadastros",to:"/cadastros/combustiveis"},{label:"Combustiveis",to:"/cadastros/combustiveis"},{label:this.titulo,to:"#"}],this.isEdicao){const a=this.router.currentRoute.value.params.id,t=await this.combustivelService.get(a);this.id=t.id,this.descricao=t.descricao}this.onSubmit=this.handleSubmit(async a=>{const t={id:this.id,descricao:a.descricao};try{this.loading=!0,this.id?await this.combustivelService.update(t):await this.combustivelService.create(t),this.toast.add({severity:"success",summary:"Cadastro salvo com sucesso",detail:"",life:3e3}),setTimeout(()=>{this.router.push("/cadastros/combustiveis")},400)}catch(r){this.toast.add({severity:"error",summary:r.message,detail:"",life:3e3}),this.loading=!1}})},methods:{submit:async function(){this.onSubmit()}}},F={class:"font-medium text-2xl text-color"},P={class:"grid p-fluid"},D={class:"col-12 md:col-12"},R={class:"card"},q={key:0},H={class:"p-input-title"},z={class:"grid formgrid"},G={class:"col-12 mb-2 lg:col-6"},O=s("h6",{class:"p-input-title"},"Nome",-1),U={class:"p-error",id:"text-error"},j={class:"my-2"};function A(a,t,r,c,e,n){const d=i("Toast"),_=i("Breadcrumb"),p=i("InputText"),v=i("Panel"),u=i("Button"),f=i("router-link"),g=i("Toolbar");return b(),h(T,null,[o(d),s("div",F,m(e.titulo),1),o(_,{home:e.breadcrumbHome,model:e.breadcrumbItems},null,8,["home","model"]),s("div",P,[s("div",D,[s("div",R,[s("form",null,[o(v,{header:"Dados Principais",toggleable:"",class:"mb-4"},{default:l(()=>[e.id?(b(),h("div",q,[s("h6",H,"CÓDIGO: "+m(this.id),1)])):B("",!0),s("div",z,[s("div",G,[O,o(p,{modelValue:c.descricao,"onUpdate:modelValue":t[0]||(t[0]=C=>c.descricao=C),class:E({"p-invalid":c.errors.descricao}),type:"text"},null,8,["modelValue","class"]),s("small",U,m(c.errors.descricao||""),1)])])]),_:1})])]),o(g,null,{start:l(()=>[o(f,{to:"/cadastros/combustiveis"},{default:l(()=>[o(u,{label:"Voltar",icon:"pi pi-undo",class:"p-button-secondary mr-2",raised:""})]),_:1})]),end:l(()=>[s("div",j,[o(u,{label:"Salvar",icon:"pi pi-save",class:"p-button-sucess mr-4",loading:e.loading,raised:"",onClick:n.submit},null,8,["loading","onClick"])])]),_:1})])])],64)}const Q=S(N,[["render",A]]);export{Q as default};
