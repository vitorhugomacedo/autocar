import{G as T}from"./GrupoContabilService-a4ba4ad7.js";import{_ as V,l as E,m as k,n as w,b as a,c as b,d as h,f as i,e as o,t as l,g as d,F as D,k as B,q as f}from"./index-777c8e91.js";import{c as I,a as g}from"./index.esm-960d875f.js";import"./UrlService-8cfe23a9.js";const G={name:"GrupoContabilCadastro",components:{},setup(){const r=E(),t=k(),c=new T,{errors:s,handleSubmit:e,defineField:n}=w({validationSchema:I({descricao:g().required("Campo obrigatório"),tipo:g().required("Campo obrigatório")})}),[u]=n("descricao"),[p]=n("tipo");return{router:r,toast:t,grupoContabilService:c,descricao:u,tipo:p,handleSubmit:e,errors:s}},data(){return{breadcrumbHome:{icon:"pi pi-home",to:"/"},breadcrumbItems:[],tipos:[{opcao:"RECEITA",id:"R"},{opcao:"DESPESA",id:"D"}],titulo:"",isEdicao:!1,id:0,onSubmit:null,loading:!1}},async mounted(){if(this.isEdicao=this.router.currentRoute.value.fullPath.includes("editar"),this.titulo=this.isEdicao?"Editar grupo contabil":"Novo grupo contabil",this.breadcrumbItems=[{label:"Cadastros",to:"/financeiro/cadastros/grupo-contabil"},{label:"Grupo contábeis",to:"/financeiro/cadastros/grupo-contabil"},{label:this.titulo,to:"#"}],this.isEdicao){const r=this.router.currentRoute.value.params.id,t=await this.grupoContabilService.get(r);this.id=t.id,this.descricao=t.descricao,this.tipo=t.tipo}this.onSubmit=this.handleSubmit(async r=>{const t={id:this.id,descricao:r.descricao,tipo:r.tipo};try{this.loading=!0,this.id?await this.grupoContabilService.update(t):await this.grupoContabilService.create(t),this.toast.add({severity:"success",summary:"Cadastro salvo com sucesso",detail:"",life:3e3}),setTimeout(()=>{this.router.push("/financeiro/cadastros/grupo-contabil")},400)}catch(c){this.toast.add({severity:"error",summary:c.message,detail:"",life:3e3}),this.loading=!1}})},methods:{submit:async function(){this.onSubmit()}}},P={class:"font-medium text-2xl text-color"},R={class:"grid p-fluid"},F={class:"col-12 md:col-12"},N={class:"card"},q={key:0},A={class:"p-input-title"},H={class:"grid formgrid"},U={class:"col-12 mb-2 lg:col-6"},z=o("h6",{class:"p-input-title"},"Descrição",-1),L={class:"p-error",id:"text-error"},O={class:"grid formgrid"},j={class:"col-12 mb-2 lg:col-6"},J=o("h6",{class:"p-input-title"},"Tipo de Classificação",-1),K={class:"p-error",id:"text-error"},M={class:"my-2"};function Q(r,t,c,s,e,n){const u=a("Toast"),p=a("Breadcrumb"),v=a("InputText"),C=a("Dropdown"),S=a("Panel"),_=a("Button"),y=a("router-link"),x=a("Toolbar");return b(),h(D,null,[i(u),o("div",P,l(e.titulo),1),i(p,{home:e.breadcrumbHome,model:e.breadcrumbItems},null,8,["home","model"]),o("div",R,[o("div",F,[o("div",N,[o("form",null,[i(S,{header:"Dados Principais",toggleable:"",class:"mb-4"},{default:d(()=>[e.id?(b(),h("div",q,[o("h6",A,"CÓDIGO: "+l(this.id),1)])):B("",!0),o("div",H,[o("div",U,[z,i(v,{modelValue:s.descricao,"onUpdate:modelValue":t[0]||(t[0]=m=>s.descricao=m),class:f({"p-invalid":s.errors.descricao}),type:"text"},null,8,["modelValue","class"]),o("small",L,l(s.errors.descricao||""),1)])]),o("div",O,[o("div",j,[J,i(C,{modelValue:s.tipo,"onUpdate:modelValue":t[1]||(t[1]=m=>s.tipo=m),editable:"",options:e.tipos,optionLabel:"opcao",optionValue:"id",placeholder:"Selecione o Tipo de Classificação",class:f(["w-full",{"p-invalid":s.errors.tipo}])},null,8,["modelValue","options","class"]),o("small",K,l(s.errors.tipo||""),1)])])]),_:1})])]),i(x,null,{start:d(()=>[i(y,{to:"/financeiro/cadastros/grupo-contabil"},{default:d(()=>[i(_,{label:"Voltar",icon:"pi pi-undo",class:"p-button-secondary mr-2",raised:""})]),_:1})]),end:d(()=>[o("div",M,[i(_,{label:"Salvar",icon:"pi pi-save",class:"p-button-sucess mr-4",loading:e.loading,raised:"",onClick:n.submit},null,8,["loading","onClick"])])]),_:1})])])],64)}const $=V(G,[["render",Q]]);export{$ as default};
