import{T as y}from"./TipoVeiculoService-09e12947.js";import{_ as S,l as T,m as C,n as x,b as i,c as p,d as h,f as e,e as o,t as u,g as n,F as k,k as B,q as E}from"./index-b821698f.js";import{c as I,a as w}from"./index.esm-960d875f.js";import"./UrlService-8cfe23a9.js";const N={name:"TipoVeiculoCadastro",components:{},setup(){const a=T(),t=C(),r=new y,{errors:c,handleSubmit:s,defineField:l}=x({validationSchema:I({nome:w().required("Campo obrigatório")})}),[d]=l("nome");return{router:a,toast:t,tipoVeiculoService:r,nome:d,handleSubmit:s,errors:c}},data(){return{breadcrumbHome:{icon:"pi pi-home",to:"/"},breadcrumbItems:[],titulo:"",isEdicao:!1,id:0,onSubmit:null,loading:!1}},async mounted(){if(this.isEdicao=this.router.currentRoute.value.fullPath.includes("editar"),this.titulo=this.isEdicao?"Editar tipo de Veículo":"Novo tipo de Veículo",this.breadcrumbItems=[{label:"Cadastros",to:"/cadastros/tipos-veiculos"},{label:"Tipos de Veículos",to:"/cadastros/tipos-veiculos"},{label:this.titulo,to:"#"}],this.isEdicao){const a=this.router.currentRoute.value.params.id,t=await this.tipoVeiculoService.get(a);this.id=t.id,this.nome=t.nome}this.onSubmit=this.handleSubmit(async a=>{const t={id:this.id,nome:a.nome};try{this.loading=!0;debugger;this.id?await this.tipoVeiculoService.update(t):await this.tipoVeiculoService.create(t),this.toast.add({severity:"success",summary:"Cadastro salvo com sucesso",detail:"",life:3e3}),setTimeout(()=>{this.router.push("/cadastros/tipos-veiculos")},400)}catch(r){this.toast.add({severity:"error",summary:r.message,detail:"",life:3e3}),this.loading=!1}})},methods:{submit:async function(){this.onSubmit()}}},F={class:"font-medium text-2xl text-color"},P={class:"grid p-fluid"},D={class:"col-12 md:col-12"},R={class:"card"},q={key:0},H={class:"p-input-title"},z={class:"grid formgrid"},G={class:"col-12 mb-2 lg:col-6"},O=o("h6",{class:"p-input-title"},"Nome",-1),U={class:"p-error",id:"text-error"},j={class:"my-2"};function A(a,t,r,c,s,l){const d=i("Toast"),_=i("Breadcrumb"),b=i("InputText"),v=i("Panel"),m=i("Button"),f=i("router-link"),g=i("Toolbar");return p(),h(k,null,[e(d),o("div",F,u(s.titulo),1),e(_,{home:s.breadcrumbHome,model:s.breadcrumbItems},null,8,["home","model"]),o("div",P,[o("div",D,[o("div",R,[o("form",null,[e(v,{header:"Dados Principais",toggleable:"",class:"mb-4"},{default:n(()=>[s.id?(p(),h("div",q,[o("h6",H,"CÓDIGO: "+u(this.id),1)])):B("",!0),o("div",z,[o("div",G,[O,e(b,{modelValue:c.nome,"onUpdate:modelValue":t[0]||(t[0]=V=>c.nome=V),class:E({"p-invalid":c.errors.nome}),type:"text"},null,8,["modelValue","class"]),o("small",U,u(c.errors.nome||""),1)])])]),_:1})])]),e(g,null,{start:n(()=>[e(f,{to:"/cadastros/tipos-veiculos"},{default:n(()=>[e(m,{label:"Voltar",icon:"pi pi-undo",class:"p-button-secondary mr-2",raised:""})]),_:1})]),end:n(()=>[o("div",j,[e(m,{label:"Salvar",icon:"pi pi-save",class:"p-button-sucess mr-4",loading:s.loading,raised:"",onClick:l.submit},null,8,["loading","onClick"])])]),_:1})])])],64)}const Q=S(N,[["render",A]]);export{Q as default};
