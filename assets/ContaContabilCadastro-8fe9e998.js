import{C as y}from"./ContaContabilService-d305c6b7.js";import{G as x}from"./GrupoContabilService-a4ba4ad7.js";import{_ as V,l as w,m as k,n as T,b as a,c as _,d as C,f as s,e as o,t as l,g as d,F as B,k as D,q as f}from"./index-777c8e91.js";import{c as E,a as I,b as F}from"./index.esm-960d875f.js";import"./UrlService-8cfe23a9.js";const N={name:"ContaContabilCadastro",components:{},setup(){const n=w(),t=k(),r=new y,i=new x,{errors:e,handleSubmit:u,defineField:c}=T({validationSchema:E({descricao:I().required("Campo obrigatório"),idGrupoContabil:F().required("Campo obrigatório")})}),[m]=c("descricao"),[b]=c("idGrupoContabil");return{router:n,toast:t,contaContabilService:r,grupoContabilService:i,descricao:m,idGrupoContabil:b,handleSubmit:u,errors:e}},data(){return{breadcrumbHome:{icon:"pi pi-home",to:"/"},breadcrumbItems:[],gruposContabeis:[],titulo:"",isEdicao:!1,id:0,onSubmit:null,loading:!1}},async mounted(){if(this.isEdicao=this.router.currentRoute.value.fullPath.includes("editar"),this.titulo=this.isEdicao?"Editar conta contabil":"Nova conta contabil",this.breadcrumbItems=[{label:"Cadastros",to:"/financeiro/cadastros/conta-contabil"},{label:"Conta contábeis",to:"/financeiro/cadastros/conta-contabil"},{label:this.titulo,to:"#"}],this.gruposContabeis=await this.grupoContabilService.getOptions(),this.isEdicao){const n=this.router.currentRoute.value.params.id,t=await this.contaContabilService.get(n);this.id=t.id,this.descricao=t.descricao,this.idGrupoContabil=t.grupoContabil.id}this.onSubmit=this.handleSubmit(async n=>{const t={id:this.id,descricao:n.descricao,idGrupoContabil:n.idGrupoContabil};try{this.loading=!0,this.id?await this.contaContabilService.update(t):await this.contaContabilService.create(t),this.toast.add({severity:"success",summary:"Cadastro salvo com sucesso",detail:"",life:3e3}),setTimeout(()=>{this.router.push("/financeiro/cadastros/conta-contabil")},400)}catch(r){this.toast.add({severity:"error",summary:r.message,detail:"",life:3e3}),this.loading=!1}})},methods:{submit:async function(){this.onSubmit()}}},P={class:"font-medium text-2xl text-color"},q={class:"grid p-fluid"},R={class:"col-12 md:col-12"},H={class:"card"},O={key:0},U={class:"p-input-title"},z={class:"grid formgrid"},L={class:"col-12 mb-2 lg:col-6"},j=o("h6",{class:"p-input-title"},"Descrição",-1),A={class:"p-error",id:"text-error"},J={class:"grid formgrid"},K={class:"col-12 mb-2 lg:col-6"},M=o("h6",{class:"p-input-title"},"Grupo Contábil",-1),Q={class:"p-error",id:"text-error"},W={class:"my-2"};function X(n,t,r,i,e,u){const c=a("Toast"),m=a("Breadcrumb"),b=a("InputText"),g=a("Dropdown"),v=a("Panel"),h=a("Button"),S=a("router-link"),G=a("Toolbar");return _(),C(B,null,[s(c),o("div",P,l(e.titulo),1),s(m,{home:e.breadcrumbHome,model:e.breadcrumbItems},null,8,["home","model"]),o("div",q,[o("div",R,[o("div",H,[o("form",null,[s(v,{header:"Dados Principais",toggleable:"",class:"mb-4"},{default:d(()=>[e.id?(_(),C("div",O,[o("h6",U,"CÓDIGO: "+l(this.id),1)])):D("",!0),o("div",z,[o("div",L,[j,s(b,{modelValue:i.descricao,"onUpdate:modelValue":t[0]||(t[0]=p=>i.descricao=p),class:f({"p-invalid":i.errors.descricao}),type:"text"},null,8,["modelValue","class"]),o("small",A,l(i.errors.descricao||""),1)])]),o("div",J,[o("div",K,[M,s(g,{modelValue:i.idGrupoContabil,"onUpdate:modelValue":t[1]||(t[1]=p=>i.idGrupoContabil=p),editable:"",options:e.gruposContabeis,optionLabel:"opcao",optionValue:"id",placeholder:"Selecione o Grupo Contábil",class:f(["w-full",{"p-invalid":i.errors.idGrupoContabil}])},null,8,["modelValue","options","class"]),o("small",Q,l(i.errors.idGrupoContabil||""),1)])])]),_:1})])]),s(G,null,{start:d(()=>[s(S,{to:"/financeiro/cadastros/conta-contabil"},{default:d(()=>[s(h,{label:"Voltar",icon:"pi pi-undo",class:"p-button-secondary mr-2",raised:""})]),_:1})]),end:d(()=>[o("div",W,[s(h,{label:"Salvar",icon:"pi pi-save",class:"p-button-sucess mr-4",loading:e.loading,raised:"",onClick:u.submit},null,8,["loading","onClick"])])]),_:1})])])],64)}const io=V(N,[["render",X]]);export{io as default};
