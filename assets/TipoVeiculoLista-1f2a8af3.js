import{T as F}from"./TipoVeiculoService-574afb1c.js";import{U as V}from"./UrlService-8cfe23a9.js";import{_ as k,y as D,m as B,b as c,p as R,c as f,d as g,f as e,e as r,g as t,j,F as N,q as P,t as u,i as v,s as b,k as z}from"./index-def3a469.js";import{F as E}from"./Filtros-9c86de79.js";const I={name:"TipoVeiculoLista",components:{Filtros:E},setup(){const o=D(),a=B(),l=new V;return{confirm:o,toast:a,urlService:l}},data(){return{breadcrumbHome:{icon:"pi pi-home",to:"/"},breadcrumbItems:[{label:"Cadastros",to:"/cadastros/tipos-veiculos"},{label:"Tipos de Veículos",to:"/cadastros/tipos-veiculos"}],filters:[],tipoVeiculoService:null,registros:[],loading:!0}},async beforeMount(){this.searchRecords(),this.buildFilters()},methods:{showTemplate:function(o,a){this.confirm.require({group:"templating",header:"Confirmação",message:a,icon:"pi pi-exclamation-circle",acceptIcon:"pi pi-check",rejectIcon:"pi pi-times",rejectClass:"p-button-outlined p-button-sm",acceptClass:"p-button-sm",rejectLabel:"Cancelar",acceptLabel:"Excluir",accept:async()=>{await this.tipoVeiculoService.delete({id:o});const l=this.registros.data.findIndex(p=>p.id==o);l>-1&&this.registros.data.splice(l,1),this.toast.add({severity:"success",summary:"Registro excluído com sucesso",detail:"",life:3e3})}})},searchRecords:async function(){this.loading=!0,this.tipoVeiculoService=new F,this.registros=await this.tipoVeiculoService.getAll(this.urlService.getQueryParamsObject()),this.loading=!1},buildFilters:async function(){this.filters=[{field:"Descricão",property:"descricao",type:"text"}]},updateFilter:function(o){this.urlService.clearQueryParams();for(var a in o)o.hasOwnProperty(a)&&this.urlService.setParam(a,o[a]);this.searchRecords()},changePage:async function(o){this.urlService.setParam("page",o.page+1),this.searchRecords()}}},L=r("div",{class:"font-medium text-2xl text-color"},"Tipos de veículos",-1),H={class:"grid p-fluid"},q={class:"col-12 md:col-12"},O={class:"card"},Q={class:"my-2"},U={class:"flex flex-column align-items-center w-full gap-3 surface-border"},A=r("i",{class:"pi pi-spin pi-spinner",style:{"font-size":"2rem"}},null,-1),K={style:{"vertical-align":"middle"},class:"image-text"},M={key:0};function G(o,a,l,p,i,m){const y=c("Breadcrumb"),n=c("Button"),h=c("router-link"),x=c("Toolbar"),C=c("ConfirmDialog"),w=c("Filtros"),d=c("Column"),T=c("DataTable"),S=c("Toast"),_=R("tooltip");return f(),g(N,null,[L,e(y,{home:i.breadcrumbHome,model:i.breadcrumbItems},null,8,["home","model"]),r("div",H,[r("div",q,[r("div",O,[e(x,{class:"mb-4"},{end:t(()=>[r("div",Q,[e(h,{to:"/cadastros/tipos-veiculos/novo"},{default:t(()=>[e(n,{label:"Novo",icon:"pi pi-plus",class:"p-button-primary mr-2"})]),_:1})])]),_:1}),e(C,{group:"templating"},{message:t(s=>[r("div",U,[r("i",{class:P([s.message.icon,"text-6xl text-primary-500"])},null,2),r("p",null,u(s.message.message),1)])]),_:1}),e(T,{value:i.registros.data,paginator:"",lazy:"",first:(i.registros.currentPage-1)*i.registros.pageSize,rows:i.registros.pageSize,totalRecords:i.registros.count,class:"p-datatable backgroud-color-white",dataKey:"id",rowHover:!0,filterDisplay:"menu",loading:i.loading,responsiveLayout:"scroll"},j({header:t(()=>[e(w,{filters:i.filters,updateFilter:m.updateFilter},null,8,["filters","updateFilter"])]),loading:t(()=>[A]),footer:t(()=>[]),default:t(()=>[e(d,{field:"id",header:"Cód.",bodyClass:"text-left",style:{"min-width":"2rem"}},{body:t(({data:s})=>[r("span",K,u(s.id),1)]),_:1}),e(d,{field:"descricao",header:"Descrição",style:{"min-width":"12rem"}},{body:t(({data:s})=>[v(u(s.descricao),1)]),_:1}),e(d,{field:"Edit",header:"",dataType:"boolean",bodyClass:"text-right",style:{"min-width":"10rem",width:"5rem"}},{body:t(({data:s})=>[s.editavel?(f(),g("div",M,[e(h,{class:"mr-4",to:`/cadastros/tipos-veiculos/editar/${s.id}`},{default:t(()=>[b(e(n,{icon:"pi pi-user-edit",class:"p-button-rounded p-button-text",text:"",rounded:""},null,512),[[_,"Editar",void 0,{top:!0}]])]),_:2},1032,["to"]),b(e(n,{icon:"pi pi-trash",class:"p-button-rounded p-button-text",text:"",rounded:"",onClick:J=>m.showTemplate(s.id,`Deseja realmente excluir o tipo de veiculo ${s.descricao}?`)},null,8,["onClick"]),[[_,"Excluir",void 0,{top:!0}]])])):z("",!0)]),_:1})]),_:2},[i.loading?void 0:{name:"empty",fn:t(()=>[v("Nenhum tipo de veículo encontrado. ")]),key:"0"}]),1032,["value","first","rows","totalRecords","loading"])])]),e(S)])],64)}const $=k(I,[["render",G]]);export{$ as default};
