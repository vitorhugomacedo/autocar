import{C as F}from"./CarteiraService-0c0493e7.js";import{T as k}from"./TipoCarteiraService-ec700726.js";import{U as D}from"./UrlService-8cfe23a9.js";import{_ as B,y as R,m as j,b as a,p as N,c as g,d as b,f as e,e as o,g as r,j as P,F as z,q as E,t as m,i as u,s as v,k as I}from"./index-b821698f.js";import{F as L}from"./Filtros-6d2f144b.js";const V={name:"CarteiraLista",components:{Filtros:L},setup(){const t=R(),c=j(),n=new D,l=new k;return{confirm:t,toast:c,urlService:n,tipoCarteiraService:l}},data(){return{breadcrumbHome:{icon:"pi pi-home",to:"/"},breadcrumbItems:[{label:"Cadastros",to:"/financeiro/cadastros/carteira"},{label:"Carteiras",to:"/financeiro/cadastros/carteira"}],filters:[],carteiraService:null,registros:[],loading:!0}},async beforeMount(){this.searchRecords(),this.buildFilters()},methods:{showTemplate:function(t,c){this.confirm.require({group:"templating",header:"Confirmação",message:c,icon:"pi pi-exclamation-circle",acceptIcon:"pi pi-check",rejectIcon:"pi pi-times",rejectClass:"p-button-outlined p-button-sm",acceptClass:"p-button-sm",rejectLabel:"Cancelar",acceptLabel:"Excluir",accept:async()=>{await this.carteiraService.delete({id:t});const n=this.registros.findIndex(l=>l.id==t);n>-1&&this.registros.splice(n,1),this.toast.add({severity:"success",summary:"Registro excluído com sucesso",detail:"",life:3e3})}})},searchRecords:async function(){this.loading=!0,this.carteiraService=new F,this.registros=await this.carteiraService.getAll(this.urlService.getQueryParamsObject()),this.loading=!1},buildFilters:async function(){const t=await this.tipoCarteiraService.getOptions();this.filters=[{field:"Descricão",property:"descricao",type:"text"},{field:"Tipo de Carteira",property:"idTipoCarteira",type:"multiselect",options:t}]},updateFilter:function(t){this.urlService.clearQueryParams();for(var c in t)t.hasOwnProperty(c)&&this.urlService.setParam(c,t[c]);this.searchRecords()},changePage:async function(t){this.urlService.setParam("page",t.page+1),this.searchRecords()}}},H=o("div",{class:"font-medium text-2xl text-color"},"Carteiras",-1),O={class:"grid p-fluid"},q={class:"col-12 md:col-12"},Q={class:"card"},U={class:"my-2"},A={class:"flex flex-column align-items-center w-full gap-3 surface-border"},K=o("i",{class:"pi pi-spin pi-spinner",style:{"font-size":"2rem"}},null,-1),M={style:{"vertical-align":"middle"},class:"image-text"},G={key:0};function J(t,c,n,l,s,f){const y=a("Breadcrumb"),p=a("Button"),h=a("router-link"),C=a("Toolbar"),x=a("ConfirmDialog"),w=a("Filtros"),d=a("Column"),S=a("DataTable"),T=a("Toast"),_=N("tooltip");return g(),b(z,null,[H,e(y,{home:s.breadcrumbHome,model:s.breadcrumbItems},null,8,["home","model"]),o("div",O,[o("div",q,[o("div",Q,[e(C,{class:"mb-4"},{end:r(()=>[o("div",U,[e(h,{to:"/financeiro/cadastros/carteira/novo"},{default:r(()=>[e(p,{label:"Novo",icon:"pi pi-plus",class:"p-button-primary mr-2"})]),_:1})])]),_:1}),e(x,{group:"templating"},{message:r(i=>[o("div",A,[o("i",{class:E([i.message.icon,"text-6xl text-primary-500"])},null,2),o("p",null,m(i.message.message),1)])]),_:1}),e(S,{value:s.registros.data,paginator:"",lazy:"",first:(s.registros.currentPage-1)*s.registros.pageSize,rows:s.registros.pageSize,totalRecords:s.registros.count,class:"p-datatable backgroud-color-white",dataKey:"id",rowHover:!0,filterDisplay:"menu",loading:s.loading,responsiveLayout:"scroll"},P({header:r(()=>[e(w,{filters:s.filters,updateFilter:f.updateFilter},null,8,["filters","updateFilter"])]),loading:r(()=>[K]),footer:r(()=>[]),default:r(()=>[e(d,{field:"id",header:"Cód.",bodyClass:"text-left",style:{"min-width":"2rem"}},{body:r(({data:i})=>[o("span",M,m(i.id),1)]),_:1}),e(d,{field:"descricao",header:"Descrição",style:{"min-width":"12rem"}},{body:r(({data:i})=>[u(m(i.descricao),1)]),_:1}),e(d,{field:"tipoCarteira",header:"Tipo de Carteira",style:{"min-width":"12rem"}},{body:r(({data:i})=>[u(m(i.tipoCarteira.descricao),1)]),_:1}),e(d,{field:"Edit",header:"",dataType:"boolean",bodyClass:"text-right",style:{"min-width":"4rem"}},{body:r(({data:i})=>[i.editavel?(g(),b("div",G,[e(h,{to:`/financeiro/cadastros/carteira/editar/${i.id}`},{default:r(()=>[v(e(p,{icon:"pi pi-user-edit",class:"p-button-rounded p-button-text",text:"",rounded:""},null,512),[[_,"Editar",void 0,{top:!0}]])]),_:2},1032,["to"]),v(e(p,{icon:"pi pi-trash",class:"p-button-rounded p-button-text",text:"",rounded:"",onClick:W=>f.showTemplate(i.id,`Deseja realmente excluir a carteira ${i.descricao}?`)},null,8,["onClick"]),[[_,"Excluir",void 0,{top:!0}]])])):I("",!0)]),_:1})]),_:2},[s.loading?void 0:{name:"empty",fn:r(()=>[u("Nenhuma carteira encontrada. ")]),key:"0"}]),1032,["value","first","rows","totalRecords","loading"])])]),e(T)])],64)}const te=B(V,[["render",J]]);export{te as default};
